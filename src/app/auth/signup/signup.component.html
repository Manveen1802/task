<div class="container signup-page">
    <div class="card signup-card">
        <h4 class="card-header">Sign Up</h4>
        <div class="card-body ">
          <form [formGroup]="signupForm"  (ngSubmit)="signupForm.status !== 'INVALID' && signupFn()">
            <div class="row">
                <div class="col-md-12 mb-2">
                    <label class="form-label" for="">Name</label>
                    <input type="text"
                    class="form-control"
                    placeholder="Name"
                    formControlName="name"
                    [ngClass]="{error: getControl('name')?.errors && getControl('name')?.touched}">
                    <div class="error-message" 
                    *ngIf="getControl('name')?.errors && getControl('name')?.touched">
                        <small class="text-danger" *ngIf="getControl('name')?.errors?.['required']">
                            Name is required 
                        </small>
                    </div>
                </div>
                <div class="col-md-12 mb-2">
                    <label class="form-label" for="">Email</label>
                    <input type="email"
                    class="form-control"
                    placeholder="Email"
                    formControlName="email"
                    pattern="^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$"
                    [ngClass]="{error: getControl('email')?.errors && getControl('email')?.touched}">
                    <div class="error-message" *ngIf="getControl('email')?.errors && getControl('email')?.touched">
                        <small class="text-danger" *ngIf="getControl('email')?.errors?.['required']">
                            Email is required 
                        </small>
                        <small class="text-danger"
                        *ngIf="getControl('email')?.errors?.['maxlength']">Only 32 characters are allowed</small>
                        <small class="text-danger"
                        *ngIf="getControl('email')?.errors?.['pattern']">Please enter a valid email</small>
                    </div>
                </div>
                <div class="col-md-12 mb-2">
                    <label class="form-label" for="">Mobile No</label>
                    <input type="text"
                    class="form-control"
                    placeholder="Mobile Number"
                    formControlName="mobile_number"
                    [minlength]="10"
                    [maxlength]="10"
                    [ngClass]="{error: getControl('mobile_number')?.errors && getControl('mobile_number')?.touched}">
                    <div class="error-message" *ngIf="getControl('mobile_number')?.errors && getControl('mobile_number')?.touched">
                        <small 
                        class="text-danger" 
                        *ngIf="getControl('mobile_number')?.errors?.['required']">
                            This Field is Required
                        </small>
                        <small 
                        class="text-danger" 
                        *ngIf="getControl('mobile_number')?.errors?.['maxlength'] || getControl('mobile_number')?.errors?.['minlength'] || getControl('mobile_number')?.errors?.['pattern']">
                        Please enter a valid mobile number
                        </small>
                    </div>
                </div>
                <div class="col-md-12 mb-2">
                    <label class="form-label" for="">Batch Number</label>
                    <input type="text"
                    class="form-control"
                    placeholder="Batch Number"
                    formControlName="batch_number"
                    [minlength]="4"
                    [maxlength]="4"
                    [ngClass]="{error: getControl('batch_number')?.errors && getControl('batch_number')?.touched}">
                    <div class="error-message" *ngIf="getControl('batch_number')?.errors && getControl('batch_number')?.touched">
                        <small 
                        class="text-danger" 
                        *ngIf="getControl('batch_number')?.errors?.['required']">
                            This Field is Required
                        </small>
                        <small 
                        class= "text-danger" 
                        *ngIf="getControl('batch_number')?.errors?.['maxlength'] || getControl('batch_number')?.errors?.['minlength']">
                        Please enter a valid batch number
                        </small>
                    </div>
                </div>
                
                <!-- <div class="col-md-12 mb-2">
                    <label class="form-label" for="">Password</label>
                    <input type="password"
                    class="form-control"
                    placeholder="Password"
                    formControlName="password"
                    [ngClass]="{error: getControl('password')?.errors && getControl('password')?.touched}">
                    <div class="error-message" *ngIf="getControl('password')?.errors && getControl('password')?.touched">
                        <small class="text-danger" *ngIf="getControl('password')?.errors?.['required']">
                            Password is Required
                        </small>
                        <small class="text-danger"
                        *ngIf="getControl('password')?.errors?.['maxlength'] || getControl('password')?.errors?.['minlength']">
                        Password should be minimum 8 and maximum 32 characters
                        </small>
                    </div>
                </div>
                <div class="col-md-12 mb-3">
                    <label class="form-label" for="">Confirm Password</label>
                    <input type="password"
                    class="form-control"
                    placeholder="Confirm Password"
                    formControlName="cPassword"
                    [ngClass]="{error: getControl('cPassword')?.errors && getControl('cPassword')?.touched}">
                    <div class="error-message" *ngIf="getControl('cPassword')?.errors && getControl('cPassword')?.touched">
                        <small class="text-danger" *ngIf="getControl('cPassword')?.errors?.['required']">
                           Confirm Password
                        </small>
                        <small class="text-danger"
                        *ngIf="getControl('cPassword')?.errors?.['maxlength'] || getControl('cPassword')?.errors?.['minlength']">
                        Password should be minimum 8 and maximum 32 characters
                        </small>
                    </div>
                    <div *ngIf = "signupForm.errors?.['passwordMismatchError'] && getControl('cPassword')?.touched">
                        <small class="text-danger">Password mismatch</small>
                    </div>
                </div> -->
                <div class="col-md-12 d-flex justify-content-end">
                    <input type="submit"
                    class="btn btn-success"
                    value="Submit"
                    (click)="signupFn"
                  
                    [disabled]="signupForm.status === 'INVALID'"
                    >
                </div>
                <div class="col-md-12 text-center my-4">
                    <p>Already have an Account? <a (click)="signup()">Login</a></p>
                </div>
               
            </div>
        </form>
        </div>
    </div>
</div>


<ng-template #otpModal let-modal>
    <div class="mainModal">
        <div class="modal-header">
            <h6 class="modal-title">OTP</h6>
             <div class="pull-right d-flex align-items-left">
                <button type="button" class="close " aria-label="Close" (click)="modal.dismiss('Cross click')">
                    <span aria-hidden="true">&#x2715;</span>
                </button>
            </div>
        </div>
        <div class="modal-body" style="max-height: 50vh; overflow: auto;">
            <div class="heading">
                <h4>Verify OTP</h4>
                <h6>We have sent an OTP to your number</h6>
               
            </div>
            <div class="otp-box">
                <div class="inner-otp">
                    <input type="text" id="otp1" class="otp-field"  name="OTP" [(ngModel)]="otp.first"
                        style="padding-left:0.75rem !important;" maxlength="1" pattern="^[0-9]{1}$" >
                </div>
                <div class="inner-otp">
                    <input type="text" id="otp2" class="otp-field"  name="OTP" [(ngModel)]="otp.second"
                        style="padding-left:0.75rem !important;" maxlength="1" pattern="^[0-9]{1}$">
                </div>
                <div class="inner-otp">
                    <input type="text" id="otp3" class="otp-field"  name="OTP" [(ngModel)]="otp.third"
                        style="padding-left:0.75rem !important;" maxlength="1" pattern="^[0-9]{1}$" >
                </div>
                <div class="inner-otp">
                    <input type="text" id="otp4" class="otp-field"  name="OTP" [(ngModel)]="otp.fourth"
                        style="padding-left:0.75rem !important;" maxlength="1" pattern="^[0-9]{1}$"  >
                </div>
            </div>

          

            <!-- <div class="time">
                <h6>{{timeLeft}}</h6>
            </div> -->
            <div class="d-flex align-items-center justify-content-center w-100">
                <button [disabled]="checkOTPLength()" type="button" id="verifyBtn" class="btn btn-primary my-0"
                    (click)="modal.dismiss('Button click');openVerifyModal();">Verify</button>
            </div>
            <!-- <div class="otp  d-flex align-items-center justify-content-center">
                <h5>Not yet received?</h5>
                <h6 [ngClass]="{'cursor-not-allowed':this.timer , 'cursor-pointer':this.timer===0}"
                    (click)="resendOtp()">Resend OTP</h6>
            </div> -->
        </div>
    </div>
</ng-template>
